package Paginas;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.support.ui.ExpectedConditions;
import org.openqa.selenium.support.ui.WebDriverWait;

import DSL.DSL;

public class CelulasPage {
	
	private DSL dsl;
	public WebDriver driver;
	
	public CelulasPage(WebDriver driver) {
		this.driver = driver;
		dsl = new DSL(driver);
	}
	
	//Método para se clicar em adicionar nova célula
	public void addCelula() {
		dsl.clicaXpath(("//button[contains(.,'NOVA CÉLULA')]"));
		
	}
	
	//Método para se preencher o nome de uma célula
	public void setNomeCelula(String texto) {
		dsl.escreveXpath("//input[@placeholder='Nome da Célula']", texto);
		dsl.waitSeconds(2);
	}
	
	//Método para se clicar no botão de criar nova célula
	public void buttonCriar() {
		WebDriverWait wait = new WebDriverWait(driver, 120);
		wait.until(ExpectedConditions.elementToBeClickable(By.xpath("//button[contains(.,'CRIAR')]")));
		dsl.clicaXpath("//button[contains(.,'CRIAR')]");
	}
	
	//Método para se clicar no botão de alterar célula
	public void buttonAlterar() {
	    dsl.clicaXpath("//button[contains(.,'ALTERAR')]");
		
	}
	
	//Método para se clicar no botão de configurar célula
	public void buttonConfigurar(String texto) {
		dsl.clicaXpath("//td[contains(.,'"+texto+"')]//following::td[4]//button[@class='btn btn-info']");
	}
	
	//Método para se validar se uma célula foi criada com sucesso
	public void validaCriacaoCelula(String texto, String texto2) {
		try {
			dsl.comparaXpath(texto, "//td[1][contains(.,'"+texto2+"')]");
		}
		catch(org.openqa.selenium.StaleElementReferenceException ex)
		{
			dsl.comparaXpath(texto, "//td[1][contains(.,'"+texto2+"')]");
		}
	}
	
	//Método para se desativar uma célula
	public void desativaCelula(String texto) {
		dsl.clicaXpath("//td[contains(.,'" +texto+"')]//following::td[1]/label//span[@class='slider round']");
	}     
	
	//Método para se excluir uma célula
	public void buttonExcluiCelula(String texto) {
		dsl.clicaXpath("//td[1][contains(.,'"+texto+"')]//following::td[3]//button[@class='btn btn-danger']");
		dsl.clicaCss("div.modal-footer > button.btn.btn-danger");
	}
	
	//Método para editar o nome de uma célula
	public void editaNomeCelula(String texto, String texto2) {
		dsl.clicaXpath("//td[1][contains(.,'"+texto+"')]//following::td[2]//button[@class='btn btn-primary']");
		dsl.clearXpath("//input[@placeholder='Nome da Célula']");	
		dsl.escreveXpath("//input[@placeholder='Nome da Célula']", texto2);
	}
}
