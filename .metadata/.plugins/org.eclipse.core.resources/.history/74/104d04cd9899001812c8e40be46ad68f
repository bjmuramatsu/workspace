import java.util.concurrent.TimeUnit;
import org.junit.After;
import org.junit.Before;
import org.junit.Test;
import org.openqa.selenium.Keys;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.firefox.FirefoxDriver;
import DSL.DSL;
import Paginas.CamposPersonalizadosPage;
import Paginas.CelulasPage;
import Paginas.ConfiguraCelulasPage;
import Paginas.HomePage;
import Paginas.LoginPage;
import Paginas.UsuariosPage;
import Paginas.PausasPage;

public class CelulasSuite {

	private WebDriver driver;
	private LoginPage loginpage;
	private HomePage homepage;
	private CelulasPage celulaspage;
	private ConfiguraCelulasPage configuracelulaspage;
	private CamposPersonalizadosPage campospersonalizadospage;
	private UsuariosPage usuariospage;
	private PausasPage pausaspage;

	// Método que será executado antes de todos os testes
	@Before()
	public void inicializa() {
		System.setProperty("webdriver.chrome.driver", "C:\\Users\\bruno.muramatsu\\chromedriver\\chromedriver.exe");
		driver = new ChromeDriver();
//	System.setProperty("webdriver.gecko.driver", "C:\\Users\\bruno.muramatsu\\geckodriver\\geckodriver.exe");
//	driver = new FirefoxDriver();
		driver.get("https://192.168.2.53:4200/");
		driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
		loginpage = new LoginPage(driver);
		homepage = new HomePage(driver);
		celulaspage = new CelulasPage(driver);
		configuracelulaspage = new ConfiguraCelulasPage(driver);
		campospersonalizadospage = new CamposPersonalizadosPage(driver);
		usuariospage = new UsuariosPage(driver);
		pausaspage = new PausasPage(driver);

		// Faz o login no sistema
		loginpage.clearFields();
		loginpage.SetPrefixo("tes");
		loginpage.setCodigoAgente("1092");
		loginpage.setRamal("2522");
		loginpage.buttonLogout();
		loginpage.buttonLogin();
		homepage.validalogin();

	}

	// Método que será executado depois de todos os testes
	@After
	public void finaliza() {
//			driver.quit();
 
	}

	// Teste para validação de criação de novas células e exclusão de células
	@Test()
	public void desativaCelula() {
		homepage.openMenuCelulas();
		celulaspage.addCelula();
		celulaspage.setNomeCelula("Teste célula");
		celulaspage.buttonCriar();
		celulaspage.validaCriacaoCelula("Teste célula", "Teste célula");
		celulaspage.desativaCelula("Teste célula");
		celulaspage.buttonExcluiCelula("Teste célula");
	}

	// Teste para validação de edição do nome da célula
	@Test()
	public void editaNomeCelula() {
		homepage.openMenuCelulas();
		celulaspage.addCelula();
		celulaspage.setNomeCelula("Teste célula");
		celulaspage.buttonCriar();
		celulaspage.validaCriacaoCelula("Teste célula", "Teste célula");
		celulaspage.editaNomeCelula("Teste célula", "Teste alterado");
		celulaspage.buttonAlterar();
		celulaspage.validaCriacaoCelula("Teste alterado", "Teste alterado");
		celulaspage.buttonExcluiCelula("Teste alterado");
	}

	// Teste para validação de configurações da célula
	@Test()
	public void configuraCelula() {
		homepage.openMenuCelulas();
		celulaspage.addCelula();
		celulaspage.setNomeCelula("Teste célula");
		celulaspage.buttonCriar();
		celulaspage.validaCriacaoCelula("Teste célula", "Teste célula");
		celulaspage.buttonConfigurar("Teste célula");
		configuracelulaspage.setURLFormulario("http");
		configuracelulaspage.setURLAgendamento("/agendamento");
		configuracelulaspage.setEnderecoCTI("AVAYA#CM#CSTA#AESPS633");
		configuracelulaspage.setLoginCTI("dev01");
		configuracelulaspage.setSenhaCTI("Dev@1234");
		configuracelulaspage.setTipoCampanha("receptivo");
		configuracelulaspage.setMaxSegundosInativo("10000");
		configuracelulaspage.setMaxSegundosInativoAviso("5");
		configuracelulaspage.setLimiteMinutosPausa("10");
		configuracelulaspage.setTipoCTI("AESv6.3");
		configuracelulaspage.buttonSalvar();
		homepage.openMenuCelulas();
		celulaspage.buttonExcluiCelula("Teste célula");
	}

	// Teste para validação de configuração de campos personalizados
	@Test
	public void camposPersonalizados() {
		homepage.openMenuCelulas();
		celulaspage.addCelula();
		celulaspage.setNomeCelula("Teste célula");
		celulaspage.buttonCriar();
		celulaspage.validaCriacaoCelula("Teste célula", "Teste célula");
		celulaspage.buttonCamposPersonalidados("Teste célula");
		campospersonalizadospage.buttonAddCampo();
		campospersonalizadospage.setNomeCampo("teste");
		campospersonalizadospage.setTipo(1);
		campospersonalizadospage.setOrdem("2");
		campospersonalizadospage.setTamanho("50");
		campospersonalizadospage.setObrigatório();
		campospersonalizadospage.buttonCriar();
		campospersonalizadospage.validaCriacaoCampo("teste", "Texto", "2", "50", "sim");
		homepage.openMenuCelulas();
		celulaspage.buttonExcluiCelula("Teste célula");
	}

	// Teste para validação de procura de célula
	@Test
	public void procurarCelula() {
		homepage.openMenuCelulas();
		celulaspage.addCelula();
		celulaspage.setNomeCelula("Teste");
		celulaspage.buttonCriar();
		celulaspage.validaCriacaoCelula("Teste", "Teste");
		celulaspage.procuraCelula("Teste");
		celulaspage.contaPesquisa();

	}

	// Teste para criação de pausas
	@Test
	public void adicionarTabulacao() {
		homepage.openMenuCelulas();
		celulaspage.addCelula();
		celulaspage.setNomeCelula("Teste");
		celulaspage.buttonCriar();
		celulaspage.validaCriacaoCelula("Teste", "Teste");
		homepage.openMenuUsuarios();
		usuariospage.buttonAlterar("1092");
		usuariospage.setCelulaUsuario("Teste");
		homepage.openMenuCelulas();
		celulaspage.buttonPausa("Teste");
		pausaspage.setNovaPausa("123", "motivo teste");

	}
}
